<!DOCTYPE html>
<html>
<head>
<title>Dos de Copas App</title>
<meta charset="utf-8"></meta>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<link rel="stylesheet" href="css/jquery.mobile-1.4.0.min.css"></link>
<link rel="stylesheet" href="css/redwine.css"></link>
<link rel="stylesheet" href="css/2dc.css"></link>



<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="js/jquery.mobile-1.4.0.min.js"></script>
<script type="text/javascript" src="js/fastclick.js"></script>
<script type="text/javascript" src="plugins/com.phonegap.plugins.barcodescanner/www/barcodescanner.js"></script>


<script type="text/javascript" src="js/load-json-search.js"></script>

<script type="text/javascript">



/* ANDROID



var scanCode = function() {
	console.log("Aqui llego");
	cordova.plugins.barcodeScanner.scan(
		      function (result) {
	    	      //alert("We got a barcode\n" +
	        	  //       "Result: " + result.text + "\n" +
	              //      "Format: " + result.format + "\n" +
	              //      "Cancelled: " + result.cancelled);
		          document.getElementById("search-basic").value = result.text;
		          searchItems('b');
		          //getResults('b');
	    	  }, 
	      	function (error) {
	    		  alert("Ha fallado la lectura del scanner. Error: " + error);
	      	}
	   	);
	
}
*/


/* IOS */
 
 
var scanner = cordova.require("com.phonegap.plugins.barcodescanner.barcodescanner");
var scanCode = function() {
    console.log("Aqui llego");
	scanner.scan(
                 function (result) {
                                    document.getElementById("search-basic").value = result.text;
                                    getResults('b');
                                   },
                                    function (error) {
                                     alert("Ha fallado la lectura del scanner. Error: " + error);
                                   }
);
}


</script>


</head>
<body>
	<div data-role="page" data-theme="a" id="pagesearch">
	

		<div class="cabecera ui-grid-b" data-role="header" data-position="fixed">
			<div class="ui-block-a">
				<a href="index.html" id="boton-logo" rel="external" class="ui-btn  ui-icon-2dc ui-btn-icon-notext" data-icon="custom"></a>
			</div>
			<div class="ui-block-b">
				<span class="nombre-app">Dos de copas</span><img id="img-loader" src="css/images/ajax-loader.gif"></img>
			</div>
			<div class="ui-block-c "> 
				    <div id="custom-border-radius">
					    <a href="javascript:history.back(1)" class="ui-btn ui-icon-back ui-btn-icon-notext ui-corner-all ui-btn-b">No text</a>
					</div>
			</div>
		</div><!-- /header -->
	
		<div data-role="content">


			<div>
				Escanear o introducir el código de barras <br>
				<a href="#" class="ui-btn ui-icon-barcode ui-btn-icon-top" onclick="scanCode();">Escanear</a>
			</div>
			
			
			<div id="searchDiv">
				<label for="search-basic">Código de barras:</label>
				<input type="search" name="search" id="search-basic" value="" placeholder="Código de barras..." />	
			</div>

			
			<div id="searchResults">
				<ul id="output" data-role="listview" data-filter="false">
				</ul>
			</div>
			
	
	
			
		</div><!-- /content -->
	

		
		<div data-role="footer" data-position="fixed" id="botonbusquedaCB">
			<div data-role="navbar">
				<ul>
					<li>
						<a class="ui-icon-search ui-btn-icon-top ui-alt-icon ui-nodisc-icon" href="javascript:searchItems('b');">Buscar</a>
					</li>
				</ul>



			</div>
		</div>
	
	</div><!-- /page -->
</body>
</html>
